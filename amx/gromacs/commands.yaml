--- !gromacs_reverse_api
pdb2gmx: !bash_gromacs
  arguments:
    structure: !structure
      required: true
      flag: f
    force_field: #!force_field
      flag: ff
    water:
      default: tip3p
      required: true
    posre: # itp tag?
      required: true
      flag: i
    out: !structure
      required: true
      flag: o
    top:
      flag: p
    ignh: 
      bool: true
      default: true
      required: true
editconf: !bash_gromacs
  arguments:
    structure: !structure
      required: true
      flag: f
    out: !structure
      required: true
      flag: o
    center:
      bool: true
      flag: c
    distance:
      flag: d
    resnr: {}
    translate:
      required: false
grompp: !bash_gromacs
  arguments:
    out: # counterintuitive: this is a "run input" file for mdrun
      flag: o
      required: true
    parameters:
      flag: f
      required: true
    parameters_out:
      flag: po
      required: true
    structure:
      flag: c
      required: true
    restraints:
      flag: r
      required: false
    topology:
      flag: p
      required: true
    groups:
      flag: n
    maxwarn:
      required: true
      default: 1
  base:
    out: '%s.tpr'
    parameters_out: '%s.mdp'
mdrun: !bash_gromacs
  arguments:
    input:
      flag: s
      required: true
    checkpoint:
      flag: cpo
      required: false
    trajectory:
      flag: o
    compressed:
      flag: x
    energy:
      flag: e
    logfile:
      flag: g
    structure: 
      flag: c
      required: false
    verbose:
      flag: v
      bool: true
      required: true
      default: true
    #! spack testing compiles gmx without thread-mpi
    #procs: 
    #  flag: nt
    #  required: true
    #  q
    #  default: 4
    checkpoint_in:
      flag: cpi
    noappend: {}
    deffnm: {}
  base:
    energy: '%s.edr'
    logfile: '%s.log'
    compressed: '%s.xtc'
    trajectory: '%s.trr'
    checkpoint: '%s.cpt'
    structure: '%s.gro'
    input: '%s.tpr'
solvate: !bash_gromacs
  arguments:
    structure:
      flag: cp
    solvent:
      flag: cs
    out:
      flag: o
make_ndx: !bash_gromacs
  arguments: 
    structure:
      flag: f
    out:
      flag: o
genion: !bash_gromacs
  arguments:
    input:
      flag: s
    out:
      flag: o
    index:
      flag: n
    anion:
      flag: nname
    cation:
      flag: pname
    neutral:
      bool: true
    concentration:
      flag: conc
trjconv: !bash_gromacs
  arguments:
    structure:
      flag: f
    index:
      flag: n
    center:
      bool: true
    input:
      flag: s
    out:
      flag: o
    periodic_boundaries:
      flag: pbc
      required: false
    trans:
      required: false
dump: !bash_gromacs
  arguments:
    checkpoint:
      flag: cp
    input:
      flag: s
convert-tpr: !bash_gromacs
  arguments:
    input:
      flag: s
      required: true
    index:
      flag: n
    extend: {}
    until: {}
    out: 
      flag: o
    nsteps: {} 
#! duplicate keys are not given an error!
genconf: !bash_gromacs
  arguments: 
    structure:
      flag: f
    out:
      flag: o
    nbox: {}
